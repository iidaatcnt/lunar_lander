<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunar Lander - æœˆé¢ç€é™¸ã‚²ãƒ¼ãƒ </title>
    <style>
        body {
            background-color: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            font-size: 14px;
        }
        
        .terminal {
            background-color: #001100;
            border: 2px solid #00ff00;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            border-radius: 5px;
            box-shadow: 0 0 20px #00ff0050;
        }
        
        .title {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff00;
        }
        
        .game-area {
            white-space: pre-line;
            line-height: 1.2;
            margin: 20px 0;
            min-height: 300px;
        }
        
        .status {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #00ff00;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            background-color: #003300;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px 20px;
            margin: 5px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            border-radius: 3px;
        }
        
        button:hover {
            background-color: #004400;
            box-shadow: 0 0 5px #00ff00;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .blink {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .red { color: #ff0000; }
        .yellow { color: #ffff00; }
        .cyan { color: #00ffff; }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="title">*** LUNAR LANDER ***</div>
        
        <div class="status">
            <div>é«˜åº¦: <span id="altitude">1000</span>m</div>
            <div>é€Ÿåº¦: <span id="velocity">0</span>m/s</div>
            <div>ç‡ƒæ–™: <span id="fuel">100</span>%</div>
        </div>
        
        <div class="game-area" id="gameArea"></div>
        
        <div class="controls">
            <button id="thrustBtn" onclick="thrust()">æ¨é€² (T)</button>
            <button id="startBtn" onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
            <button onclick="showInstructions()">æ“ä½œèª¬æ˜</button>
        </div>
        
        <div id="messages"></div>
    </div>

    <script>
        let gameState = {
            altitude: 1000,
            velocity: 0,
            fuel: 100,
            thrustPower: 0,
            gravity: 1.6, // æœˆã®é‡åŠ›
            gameRunning: false,
            gameOver: false
        };

        let gameInterval;
        let displayText = '';

        function initGame() {
            gameState = {
                altitude: 1000,
                velocity: 0,
                fuel: 100,
                thrustPower: 0,
                gravity: 0.8,
                gameRunning: false,
                gameOver: false
            };
            updateDisplay();
            showWelcomeMessage();
        }

        function showWelcomeMessage() {
            displayText = `
=== æœˆé¢ç€é™¸ãƒŸãƒƒã‚·ãƒ§ãƒ³ ===

æœˆé¢ç€é™¸èˆ¹ã‚’æ“ç¸¦ã—ã¦å®‰å…¨ã«ç€é™¸ã•ã›ã¦ãã ã•ã„ã€‚

ç›®æ¨™: é€Ÿåº¦5m/sä»¥ä¸‹ã§æœˆé¢ã«ç€é™¸
è­¦å‘Š: é€Ÿåº¦ãŒé€Ÿã™ãã‚‹ã¨å¢œè½ã—ã¾ã™ï¼

ç‡ƒæ–™ã¯é™ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚æ…é‡ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

æº–å‚™ã¯ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ
            `;
            document.getElementById('gameArea').innerHTML = displayText;
        }

        function showInstructions() {
            displayText = `
=== æ“ä½œèª¬æ˜ ===

â€¢ [æ¨é€²]ãƒœã‚¿ãƒ³ã¾ãŸã¯[T]ã‚­ãƒ¼: ã‚¨ãƒ³ã‚¸ãƒ³æ¨é€²
â€¢ ã‚¨ãƒ³ã‚¸ãƒ³ã¯é‡åŠ›ã«é€†ã‚‰ã£ã¦ä¸Šå‘ãã®åŠ›ã‚’ä¸ãˆã¾ã™
â€¢ ç‡ƒæ–™ãŒå°½ãã‚‹ã¨ã‚¨ãƒ³ã‚¸ãƒ³ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“
â€¢ é«˜åº¦0mã§é€Ÿåº¦5m/sä»¥ä¸‹ãªã‚‰ç€é™¸æˆåŠŸ
â€¢ é€Ÿåº¦ãŒé€Ÿã™ãã‚‹ã¨å¢œè½ã—ã¾ã™

ç‰©ç†æ³•å‰‡:
â€¢ é‡åŠ›: 1.6m/sÂ²ï¼ˆæœˆé¢ï¼‰
â€¢ æ¨é€²åŠ›: 3.0m/sÂ²

é ‘å¼µã£ã¦ï¼
            `;
            document.getElementById('gameArea').innerHTML = displayText;
        }

        function startGame() {
            if (gameState.gameRunning) return;
            
            // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            gameState = {
                altitude: 1000,
                velocity: 0,
                fuel: 100,
                thrustPower: 0,
                gravity: 0.8,  // é‡åŠ›ã‚’åŠåˆ†ã«
                gameRunning: true,
                gameOver: false
            };
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('startBtn').textContent = 'ã‚²ãƒ¼ãƒ é–‹å§‹';
            
            displayText = `
ãƒŸãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ï¼

æœˆé¢ç€é™¸èˆ¹ãŒé™ä¸‹ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚
ç‡ƒæ–™ã‚’ç®¡ç†ã—ãªãŒã‚‰å®‰å…¨ã«ç€é™¸ã•ã›ã¦ãã ã•ã„ã€‚

            `;
            document.getElementById('gameArea').innerHTML = displayText;
            
            gameInterval = setInterval(gameLoop, 100);
        }

        function thrust() {
            if (!gameState.gameRunning || gameState.gameOver || gameState.fuel <= 0) return;
            
            gameState.thrustPower = 2.5;  // æ¨é€²åŠ›ã‚’å¼·åŒ–
            gameState.fuel = Math.max(0, gameState.fuel - 0.8);  // ç‡ƒæ–™æ¶ˆè²»ã‚’æ¸›ã‚‰ã™
            
            // æ¨é€²ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä¸€å®šæ™‚é–“ç¶­æŒ
            setTimeout(() => {
                if (gameState.gameRunning && !gameState.gameOver) {
                    gameState.thrustPower = 0;
                }
            }, 300);  // åŠ¹æœæ™‚é–“ã‚’å»¶é•·
        }

        function gameLoop() {
            if (!gameState.gameRunning || gameState.gameOver) return;

            // ç‰©ç†è¨ˆç®—ï¼ˆé‡åŠ›ã¯ä¸‹å‘ãã€æ¨é€²ã¯ä¸Šå‘ãï¼‰
            let netAcceleration = gameState.gravity - gameState.thrustPower;
            gameState.velocity += netAcceleration * 0.1;
            gameState.altitude -= gameState.velocity * 0.1;

            updateDisplay();
            updateGameArea();

            // ã‚²ãƒ¼ãƒ çµ‚äº†æ¡ä»¶ãƒã‚§ãƒƒã‚¯
            if (gameState.altitude <= 0) {
                gameState.altitude = 0;
                endGame();
            }
        }

        function updateDisplay() {
            document.getElementById('altitude').textContent = Math.round(gameState.altitude);
            document.getElementById('velocity').textContent = Math.round(gameState.velocity * 10) / 10;
            document.getElementById('fuel').textContent = Math.round(gameState.fuel);
            
            // ç‡ƒæ–™è­¦å‘Š
            if (gameState.fuel < 20) {
                document.getElementById('fuel').className = 'red blink';
            } else if (gameState.fuel < 40) {
                document.getElementById('fuel').className = 'yellow';
            } else {
                document.getElementById('fuel').className = '';
            }
            
            // é€Ÿåº¦è­¦å‘Š
            if (gameState.velocity > 10) {
                document.getElementById('velocity').className = 'red';
            } else if (gameState.velocity > 5) {
                document.getElementById('velocity').className = 'yellow';
            } else {
                document.getElementById('velocity').className = '';
            }
        }

        function updateGameArea() {
            let altitudeBar = '';
            let barLength = 40;
            let position = Math.round((1000 - gameState.altitude) / 1000 * barLength);
            
            for (let i = 0; i < barLength; i++) {
                if (i === position) {
                    altitudeBar += 'â–¼';
                } else if (i === barLength - 1) {
                    altitudeBar += 'â–ˆ'; // æœˆé¢
                } else {
                    altitudeBar += 'Â·';
                }
            }

            let thrustIndicator = gameState.thrustPower > 0 ? 'ğŸ”¥' : '  ';
            let fuelBar = 'â–ˆ'.repeat(Math.round(gameState.fuel / 5));
            
            displayText = `
é«˜åº¦è¨ˆ:
${altitudeBar}

ç€é™¸èˆ¹: ${thrustIndicator}
         â–²
        â–ˆâ–ˆâ–ˆ

ç‡ƒæ–™æ®‹é‡: ${fuelBar}

é€Ÿåº¦: ${gameState.velocity > 0 ? 'â†“' : gameState.velocity < 0 ? 'â†‘' : 'ï¼'} ${Math.abs(gameState.velocity).toFixed(1)} m/s
            `;
            
            document.getElementById('gameArea').innerHTML = displayText;
        }

        function endGame() {
            gameState.gameRunning = false;
            gameState.gameOver = true;
            clearInterval(gameInterval);
            
            let result = '';
            if (Math.abs(gameState.velocity) <= 5) {
                result = `
ğŸŒ™ *** ç€é™¸æˆåŠŸï¼ ***

ç´ æ™´ã‚‰ã—ã„ï¼æœˆé¢ã¸ã®è»Ÿç€é™¸ã«æˆåŠŸã—ã¾ã—ãŸã€‚
ç€é™¸é€Ÿåº¦: ${Math.abs(gameState.velocity).toFixed(1)} m/s
æ®‹ç‡ƒæ–™: ${gameState.fuel}%

æœˆé¢ã§ã®ä»»å‹™ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚

                `;
            } else {
                result = `
ğŸ’¥ *** å¢œè½ ***

ç€é™¸èˆ¹ã¯æœˆé¢ã«æ¿€çªã—ã¾ã—ãŸã€‚
è¡çªé€Ÿåº¦: ${Math.abs(gameState.velocity).toFixed(1)} m/s

æ¬¡å›ã¯ã‚‚ã£ã¨æ…é‡ã«ç€é™¸ã—ã¦ãã ã•ã„ã€‚

                `;
            }
            
            document.getElementById('gameArea').innerHTML = result;
            
            // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´
            setTimeout(() => {
                document.getElementById('startBtn').disabled = false;
                document.getElementById('startBtn').textContent = 'å†ãƒãƒ£ãƒ¬ãƒ³ã‚¸';
            }, 1000);
        }

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
        document.addEventListener('keydown', function(event) {
            if (event.key.toLowerCase() === 't') {
                thrust();
            }
        });

        // åˆæœŸåŒ–
        initGame();
    </script>
</body>
</html>